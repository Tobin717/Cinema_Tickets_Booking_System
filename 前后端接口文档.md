# 前后端接口文档
有一些错误会以http状态码形式返回，错误信息在message字段，可以直接显示给用户，具体看每个接口下面的“错误信息”
## 全局错误码
`401`：未注册，message="用户名不存在，请先注册！"
`410`：密码错误，message="密码错误，请重新输入！"
`500`：服务器错误
## 用户登录
### `POST`		`119.23.45.53:8080/login`
## 请求参数
| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `userid`   | `string` | 用户名 |
| `password` | `string` | 密码   |
### 响应参数
| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息，直接显示给用户   |
## 注册
### `POST`		`119.23.45.53:8080/regist`
### 请求参数
| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `userid`   | `string` | 用户名 |
| `password` | `string` | 密码   |
| `email`    | `string` | 邮箱   |
### 响应参数
| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息，直接显示给用户   |
邮箱可以为空。
## 获取电影热度前N
### `POST`		`119.23.45.53:8080/getMvRank`
### 请求参数
| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `number`   | `int` | 热度前N |
### 响应参数
| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `id` | `int` |  电影id |
| `mv_name`  | `string` | 电影名字   |
| `sale`  | `int` | 电影票房   |
返回的是转化成json的N个元组。
若失败，只返回400.
## 修改用户密码
### `POST`		`119.23.45.53:8080/changePwd`
### 请求参数
| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `userid`   | `string` | 用户名 |
| `oldpassword`   | `string` |原密码 |
| `newpassword`   | `string` | 新密码 |
### 响应参数
| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `int` |  0为成功，1失败 |
| `errmsg`  | `string` | 错误码   |

## 返回用户邮箱

### `POST`		`119.23.45.53:8080/getEmail`

### 请求参数

| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `userid`   | `string` | 用户名 |


### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `int` |  0为成功，1失败 |
| `errmsg`  | `string` | 错误码   |
| `email`  | `string` | 邮箱，错误则无此项   |

## 获取场次信息

### `POST`		`119.23.45.53:8080/getFilmSession`

### 请求参数

| 参数名     | 参数类型 | 描述   |
| ---------- | -------- | ------ |
| `film_id`   | `int` |场次id |

### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `int` |  0为成功，1失败 |
| `errmsg` | `int` | 错误信息 |
| `unavailable` | `int` | 表示不可用的座位数  |

若`unavailable`不为零，返回`unavailable`个以下格式的json元组，名称为`result`。

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `row` | `int` |  不可用的座位行 |
| `col` | `int` | 不可用的座位列  |

## 购票接口

### `POST`		`119.23.45.53:8080/bookTickets`

### 请求参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `userid` | `string` |  用户名 |
| `number` | `int` | 购票数 |
| `film_id` | `int` | 场次id  |
| `seats` | `json` | 座位，包含`number`个`row`，`col`元组 |

### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息   |

## 用户订票情况接口

### `POST`		`119.23.45.53:8080/userTickets`

### 请求参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `userid` | `string` |  用户名 |

### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息   |
| `number`  | `int` | 票数、座位数   |
| `seats`  | `json` | 座位   |

`seats`结构如下：

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `film_id`  | `int` | 场次号   |
| `row`  | `int` | 行号   |
| `col`  | `int` | 列号   |

## 退票接口

### `POST`		`119.23.45.53:8080/refundTickets`

### 请求参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `userid` | `string` |  用户名 |
| `film_id` | `int` |  场次号 |
| `row` | `int` |  行号 |
| `col`  | `int` | 列号 |

### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息   |


## 用户充值接口

### `POST`		`119.23.45.53:8080/userCharge`

### 请求参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `userid` | `string` |  用户名 |
| `amount` | `int` |  充值金额 |


### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息   |



## 获取电影接口

### `POST`		`119.23.45.53:8080/getTickets`

### 请求参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `number` | `int` |  电影数量 |


### 响应参数

| 参数名    | 参数类型 | 描述                       |
| --------- | -------- | -------------------------- |
| `errcode` | `number` | 状态码（成功为0，失败为1） |
| `errmsg`  | `string` | 状态信息 |
| `cinema_name` | `string` | 电影院名称 |
| `mv_name`  | `string` | 电影名称 |
| `hall_id` | `string` | 场厅名称 |
| `start_time`  | `string` | 开始时间 |
